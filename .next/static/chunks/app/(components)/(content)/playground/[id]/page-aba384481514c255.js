(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{1722:function(e,t,r){Promise.resolve().then(r.bind(r,5058))},7138:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(231),a=r.n(n)},357:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(8081)},8081:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={exports:{}},o=!0;try{t[e](i,i.exports,n),o=!1}finally{o&&delete r[e]}return i.exports}n.ab="//";var a=n(229);e.exports=a}()},5058:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(7437),a=r(8344),i=r(7138),o=r(2265),s=r(4096),l=r(4446),c=r(9354);function u(e){let{placeholders:t,onChange:r,onSubmit:a}=e,[i,u]=(0,o.useState)(0),d=(0,o.useRef)(null),f=()=>{d.current=setInterval(()=>{u(e=>(e+1)%t.length)},3e3)},h=()=>{"visible"!==document.visibilityState&&d.current?(clearInterval(d.current),d.current=null):"visible"===document.visibilityState&&f()};(0,o.useEffect)(()=>(f(),document.addEventListener("visibilitychange",h),()=>{d.current&&clearInterval(d.current),document.removeEventListener("visibilitychange",h)}),[t]);let p=(0,o.useRef)(null),m=(0,o.useRef)([]),x=(0,o.useRef)(null),[g,v]=(0,o.useState)(""),[y,b]=(0,o.useState)(!1),w=(0,o.useCallback)(()=>{if(!x.current)return;let e=p.current;if(!e)return;let t=e.getContext("2d");if(!t)return;e.width=800,e.height=800,t.clearRect(0,0,800,800);let r=getComputedStyle(x.current),n=parseFloat(r.getPropertyValue("font-size"));t.font="".concat(2*n,"px ").concat(r.fontFamily),t.fillStyle="#FFF",t.fillText(g,16,40);let a=t.getImageData(0,0,800,800).data,i=[];for(let e=0;e<800;e++){let t=4*e*800;for(let r=0;r<800;r++){let n=t+4*r;0!==a[n]&&0!==a[n+1]&&0!==a[n+2]&&i.push({x:r,y:e,color:[a[n],a[n+1],a[n+2],a[n+3]]})}}m.current=i.map(e=>{let{x:t,y:r,color:n}=e;return{x:t,y:r,r:1,color:"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(n[3],")")}})},[g]);(0,o.useEffect)(()=>{w()},[g,w]);let j=e=>{let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(()=>{var r;let n=[];for(let t=0;t<m.current.length;t++){let r=m.current[t];if(r.x<e)n.push(r);else{if(r.r<=0){r.r=0;continue}r.x+=Math.random()>.5?1:-1,r.y+=Math.random()>.5?1:-1,r.r-=.05*Math.random(),n.push(r)}}m.current=n;let a=null===(r=p.current)||void 0===r?void 0:r.getContext("2d");a&&(a.clearRect(e,0,800,800),m.current.forEach(t=>{let{x:r,y:n,r:i,color:o}=t;r>e&&(a.beginPath(),a.rect(r,n,i,i),a.fillStyle=o,a.strokeStyle=o,a.stroke())})),m.current.length>0?t(e-8):(v(""),b(!1))})};t(e)},N=()=>{var e;b(!0),w(),(null===(e=x.current)||void 0===e?void 0:e.value)&&x.current&&j(m.current.reduce((e,t)=>t.x>e?t.x:e,0))};return(0,n.jsxs)("form",{className:(0,c.cn)("w-full relative max-w-xl mx-auto bg-gray-800 h-12 rounded-full overflow-hidden shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),_0px_1px_0px_0px_rgba(25,28,33,0.02),_0px_0px_0px_1px_rgba(25,28,33,0.08)] transition duration-200",g&&"bg-zinc-800"),onSubmit:e=>{e.preventDefault(),N(),a&&a(e)},children:[(0,n.jsx)("canvas",{className:(0,c.cn)("absolute pointer-events-none  text-base transform scale-50 top-[20%] left-2 sm:left-8 origin-top-left filter invert dark:invert-0 pr-20",y?"opacity-100":"opacity-0"),ref:p}),(0,n.jsx)("input",{onChange:e=>{!y&&(v(e.target.value),r&&r(e))},onKeyDown:e=>{"Enter"!==e.key||y||N()},ref:x,value:g,type:"text",className:(0,c.cn)("w-full relative text-sm sm:text-base z-50 border-none text-white bg-transparent h-full rounded-full focus:outline-none focus:ring-0 pl-4 sm:pl-10 pr-20",y&&"text-transparent dark:text-transparent")}),(0,n.jsx)("button",{disabled:!g,type:"submit",className:"absolute right-2 top-1/2 z-50 -translate-y-1/2 h-8 w-8 rounded-full bg-gray-900 disabled:bg-gray-800 transition duration-200 flex items-center justify-center",children:(0,n.jsxs)(s.E.svg,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-300 h-4 w-4",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n.jsx)(s.E.path,{d:"M5 12l14 0",initial:{strokeDasharray:"50%",strokeDashoffset:"50%"},animate:{strokeDashoffset:g?0:"50%"},transition:{duration:.3,ease:"linear"}}),(0,n.jsx)("path",{d:"M13 18l6 -6"}),(0,n.jsx)("path",{d:"M13 6l6 6"})]})}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center rounded-full pointer-events-none",children:(0,n.jsx)(l.M,{mode:"wait",children:!g&&(0,n.jsx)(s.E.p,{initial:{y:5,opacity:0},animate:{y:0,opacity:1},exit:{y:-15,opacity:0},transition:{duration:.3,ease:"linear"},className:"dark:text-zinc-500 text-sm sm:text-base font-normal text-neutral-500 pl-4 sm:pl-12 text-left w-[calc(100%-2rem)] truncate",children:t[i]},"current-placeholder-".concat(i))})})]})}var d=e=>{let{id:t}=e,[r,s]=(0,o.useState)([]),[l,c]=(0,o.useState)(""),[d,f]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null),m=(0,o.useRef)(null),[x,g]=(0,o.useState)({uploadKnowledge:"",apiKey:""}),[v,y]=(0,o.useState)("Gemini");(0,o.useEffect)(()=>{!async function(){let e=await (0,a.Pd)(t);e&&e.response&&e.response.data&&g({uploadKnowledge:e.response.data.uploadKnowledge,apiKey:e.response.data.apiKey})}()},[t]);let b=async e=>{try{let t=await fetch("https://api.chit-chat.fun/api/v1/QnARetrieval?key=".concat(x.apiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,llm:v})});if(!t.ok)throw Error("Failed to fetch response");let r=await t.json();return(null==r?void 0:r.message)||"No response from the bot."}catch(e){return console.error("Error fetching chatbot response:",e),"An error occurred while communicating with the server."}},w=async()=>{if(!l.trim())return;let e=l.trim();s(t=>[...t,{user:e,bot:""}]),c(""),f(!0);let t=await b(e);s(e=>e.map((r,n)=>n===e.length-1?{...r,bot:t}:r)),f(!1),h&&(p(null),setTimeout(()=>j(h),0))},j=async e=>{d?p(e):(c(e),await w())};return(0,o.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r,d]),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,n.jsxs)("div",{className:"w-full lg:w-1/2 border-b lg:border-b-0 lg:border-r border-border p-4 bg-background",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-gray-200",children:"Chatbot"}),(0,n.jsx)(i.default,{href:"/chatbotconfig?key=".concat(x.apiKey),className:"bg-gray-900 rounded-xl border border-border hover:bg-gray-800 py-2 px-4",children:"Preview â†’"})]}),(0,n.jsx)("div",{className:"h-[85vh] lg:h-[90%]",children:(0,n.jsx)("iframe",{src:x.uploadKnowledge,className:"w-full h-full rounded-2xl"})})]}),(0,n.jsxs)("div",{className:"w-full lg:w-1/2 flex flex-col h-full lg:h-[97%] p-4 bg-background",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-gray-200",children:"Chatbot"}),(0,n.jsxs)("select",{value:v,onChange:e=>{let t=e.target.value;y(t),console.log("Selected LLM: ".concat(t))},className:"bg-gray-900 text-white border border-border rounded-md p-2",children:[(0,n.jsx)("option",{value:"Gemini",children:"Gemini"}),(0,n.jsx)("option",{value:"OpenAI",children:"OpenAI"})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto border border-border rounded-md p-4 bg-gray-950",children:[0===r.length?(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Start the conversation..."}):r.map((e,t)=>(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"flex justify-end mb-2",children:(0,n.jsx)("div",{className:"max-w-xs p-2 rounded-md bg-gray-600 text-white",children:e.user})}),e.bot&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("div",{className:"max-w-xs p-2 rounded-md bg-gray-800 text-white",children:e.bot})})]},t)),d&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("div",{className:"p-2 rounded-md bg-gray-800 text-gray-400",children:(0,n.jsx)("span",{className:"typing-animation",children:"Bot is typing..."})})}),(0,n.jsx)("div",{ref:m})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(u,{placeholders:["Ask anything related to the provided data.","Refer to the file content on the left for context.","Type your query about the data and hit 'Send'.","Ask for summaries or details from the file on your left.","Who is Apurv?","Who are you?"],onChange:e=>{c(e.target.value)},onSubmit:w})})]})]})}},8344:function(e,t,r){"use strict";r.d(t,{$9:function(){return i},BX:function(){return l},Fi:function(){return d},Lc:function(){return o},Mo:function(){return f},Pd:function(){return u},Wi:function(){return s},XU:function(){return c}});var n=r(8472);let a=(0,r(4443).K)({Production:!0}),i=async e=>(await n.Z.get(a+"/api/v1/newOrganization",{params:{UserId:e}})).data,o=async e=>(await n.Z.post(a+"/api/v1/addAiTrainingModel",e)).data,s=async e=>await n.Z.post(a+"/api/v1/upload",e),l=async e=>await n.Z.post(a+"/api/v1/upload/url",{resource_url:e}),c=async e=>(await n.Z.get(a+"/api/v1/addAiTrainingModel",{params:{UserId:e}})).data,u=async e=>(await n.Z.get(a+"/api/v1/addAiTrainingModel/key",{params:{originalAPIKey:e}})).data,d=async e=>await n.Z.post(a+"/api/v1/newOrganization",e),f=async e=>await n.Z.post(a+"/signup",e)},4443:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});let n=e=>(e.Production,"https://api.chit-chat.fun")},9354:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(4839),a=r(6164);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},4446:function(e,t,r){"use strict";r.d(t,{M:function(){return g}});var n=r(7437),a=r(2265),i=r(7797),o=r(458),s=r(9791);class l extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c(e){let{children:t,isPresent:r}=e,i=(0,a.useId)(),o=(0,a.useRef)(null),c=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:u}=(0,a.useContext)(s._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:a}=c.current;if(r||!o.current||!e||!t)return;o.current.dataset.motionPopId=i;let s=document.createElement("style");return u&&(s.nonce=u),document.head.appendChild(s),s.sheet&&s.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(s)}},[r]),(0,n.jsx)(l,{isPresent:r,childRef:o,sizeRef:c,children:a.cloneElement(t,{ref:o})})}let u=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:l,custom:u,presenceAffectsLayout:f,mode:h}=e,p=(0,o.h)(d),m=(0,a.useId)(),x=(0,a.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;l&&l()},[p,l]),g=(0,a.useMemo)(()=>({id:m,initial:r,isPresent:s,custom:u,onExitComplete:x,register:e=>(p.set(e,!1),()=>p.delete(e))}),f?[Math.random(),x]:[s,x]);return(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),a.useEffect(()=>{s||p.size||!l||l()},[s]),"popLayout"===h&&(t=(0,n.jsx)(c,{isPresent:s,children:t})),(0,n.jsx)(i.O.Provider,{value:g,children:t})};function d(){return new Map}var f=r(5050),h=r(9047);let p=e=>e.key||"";function m(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var x=r(9033);let g=e=>{let{children:t,exitBeforeEnter:r,custom:i,initial:s=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:d="sync"}=e;(0,h.k)(!r,"Replace exitBeforeEnter with mode='wait'");let g=(0,a.useMemo)(()=>m(t),[t]),v=g.map(p),y=(0,a.useRef)(!0),b=(0,a.useRef)(g),w=(0,o.h)(()=>new Map),[j,N]=(0,a.useState)(g),[k,E]=(0,a.useState)(g);(0,x.L)(()=>{y.current=!1,b.current=g;for(let e=0;e<k.length;e++){let t=p(k[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[k,v.length,v.join("-")]);let T=[];if(g!==j){let e=[...g];for(let t=0;t<k.length;t++){let r=k[t],n=p(r);v.includes(n)||(e.splice(t,0,r),T.push(r))}"wait"===d&&T.length&&(e=T),E(m(e)),N(g);return}let{forceRender:S}=(0,a.useContext)(f.p);return(0,n.jsx)(n.Fragment,{children:k.map(e=>{let t=p(e),r=g===k||v.includes(t);return(0,n.jsx)(u,{isPresent:r,initial:(!y.current||!!s)&&void 0,custom:r?void 0:i,presenceAffectsLayout:c,mode:d,onExitComplete:r?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),E(b.current),l&&l())},children:e},t)})})}}},function(e){e.O(0,[868,482,472,971,23,744],function(){return e(e.s=1722)}),_N_E=e.O()}]);